# Traefik 静态配置文件
# 对应 Caddy 配置

global:
  checkNewVersion: false
  sendAnonymousUsage: false

# API 和 Dashboard（生产环境关闭）
api:
  dashboard: false
  insecure: false

# 日志配置（输出到文件，由 logrotate 管理轮转）
log:
  level: INFO
  filePath: /var/log/traefik/traefik.log

# 访问日志
accessLog:
  filePath: /var/log/traefik/access.log

# 入口点配置
entryPoints:
  # HTTP 入口点
  web:
    address: ":80"
    forwardedHeaders:
      trustedIPs:
        - "127.0.0.1/32"
        - "172.16.0.0/12"
        - "10.0.0.0/8"
        - "192.168.0.0/16"

  # HTTPS 入口点
  websecure:
    address: ":443"
    http:
      tls: {}
    http2:
      maxConcurrentStreams: 250
    http3: {}
    forwardedHeaders:
      trustedIPs:
        - "127.0.0.1/32"
        - "172.16.0.0/12"
        - "10.0.0.0/8"
        - "192.168.0.0/16"

  # 默认文件服务器 :8888
  fileserver:
    address: ":8888"

  # gadmin60 :46960
  gadmin60-static:
    address: ":46960"

  # gadmin62 :46962
  gadmin62-static:
    address: ":46962"

  # gadmin66 :46966
  gadmin66-static:
    address: ":46966"

# 文件提供者 - 加载动态配置
providers:
  file:
    directory: /etc/traefik/dynamic
    watch: true

  # Docker 自动发现
  docker:
    endpoint: "unix:///var/run/docker.sock"
    exposedByDefault: false
    network: mynet

# 服务器传输配置
serversTransport:
  insecureSkipVerify: false
